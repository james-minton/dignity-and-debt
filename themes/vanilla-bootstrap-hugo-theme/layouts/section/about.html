{{ define "main" }}

<div class="row about-hero">
  <div class="col  col-lg-7 col-md-8 col-sm-12 offset-lg-6 offset-md-4 offset-sm-0">
    {{ $img := strings.TrimPrefix "/uploads/" .Page.Params.image }}
    {{ with $.Site.GetPage "page" "uploads/_index.md" }}
        {{ with .Resources.GetMatch $img }}
              {{$img102 := .Fill "742x464 Center"}}
              <img class="flex-child" src="{{ $img102.RelPermalink }}" width="742" height="464" alt="About page banner image" tabindex="-1">
        {{ end }}
    {{ end }}
  </div>
</div>

<div class="row about-descr">
  <div class="col col-lg-7 col-md-8 col-sm-12 offset-lg-1 offset-md-1">
    <h2 tabindex="0">{{ .Page.Params.display_title }}</h2>
    <p tabindex="0">{{ .Content }}</p>
  </div>
</div>

{{ range .Site.Data.objectives }}
    <div class="row about-objective about-obj-index-{{ .index }}">
      <div class="col number col-1 offset-lg-1 col-lg-1 offset-md-1 col-md-11 offset-sm-1 col-sm-1">
        <span tabindex="0">{{ .display_number }}.</span>
      </div>
      <div class="col figure col-lg-2 offset-lg-0 col-md-3 offset-md-1 offset-sm-1 col-sm-8">
        {{ $img := strings.TrimPrefix "/uploads/" .image }}
        {{ with $.Site.GetPage "page" "uploads/_index.md" }}
          {{ with .Resources.GetMatch $img }}
            {{$imgFill := .Fill "166x201 Center"}}
            <img class="flex-child" src="{{ $imgFill.RelPermalink }}" width="166" height="200" alt="Objective icon" tabindex="-1">
          {{ end }}
        {{ end }}
      </div>
      <div class="col descr col-7 col-lg-7 offset-lg-0 col-md-7 offset-md-0 col-sm-10 offset-sm-1">
        <h3 tabindex="0">{{ .title }}</h3>
        <p tabindex="0">{{ .blurb }}</p>
      </div>
    </div>
{{ end }}

<div class="row about-people-head">
  <h2>Meet the Network</h2>
</div>

<div class="row about-director">
{{ range .Site.Data.people }}
  {{ if eq .role "director" }}
  <div class="col col-6 offset-3">
    <div class="pic">
      {{ $img := strings.TrimPrefix "/uploads/" .image }}
      {{ $name := .name }}
      {{ with $.Site.GetPage "page" "uploads/_index.md" }}
        {{ with .Resources.GetMatch $img }}
          {{$imgDir := .Fill "232x232 Center"}}
          <img class="flex-child" src="{{ $imgDir.RelPermalink }}" width="232" height="232" alt="Director {{ $name }}" tabindex="0">
        {{ end }}
      {{ end }}
    </div>
    <div class="name">{{ .name }}</div>
    <div class="title"> {{ .title }}</div>
    <div class="bio">{{ .blurb }}</div>
    <div class="morelink-parent">
      <!-- <a class="btn btn-custom" href="{{ '#' | absURL }}" tabindex="0" aria-label="Go to About">MORE INFO</a> -->
    </div>
  </div>
  {{ end }}
{{ end }}
</div>

<div class="row about-staff-head">
  <h3 class="about-staff">RESEARCH STAFF</h3>
</div>

<div class="row about-staff flex-parent">
  {{ range .Site.Data.people }}
    {{ if eq .role "staff" }}
    <div class="col col-3 col-sm-12 col-md-3 col-lg-3 flex-child">
      <div class="pic">
        {{ $img := strings.TrimPrefix "/uploads/" .image }}
        {{ $name := .name }}
        {{ with $.Site.GetPage "page" "uploads/_index.md" }}
          {{ with .Resources.GetMatch $img }}
            {{$imgDir := .Fill "232x232 Center"}}
            <img class="flex-child" src="{{ $imgDir.RelPermalink }}" width="232" height="232" alt="Director {{ $name }}" tabindex="0">
          {{ end }}
        {{ end }}
      </div>
      <div class="name">{{ .name }}</div>
      <div class="title"> {{ .title }}</div>
      <div class="bio" tabindex="-1">{{ .blurb }}</div>
      <div class="morelink-parent">
        <button class="btn btn-custom btn-bio" tabindex="0" aria-label="Read bio" data-toggle="modal" data-target="#peopleBioModal">MORE INFO</button>
      </div>
    </div>
    {{ end }}
  {{ end }}
</div>

<div class="row about-partners-head">
  <h3 class="about-partners">PARTNERS</h3>
</div>

<div class="row about-partners flex-parent">
  {{ range .Site.Data.people }}
    {{ if eq .role "partner" }}
    <div class="col col-3 flex-child">
      <div class="pic">
        {{ $img := strings.TrimPrefix "/uploads/" .image }}
        {{ $name := .name }}
        {{ with $.Site.GetPage "page" "uploads/_index.md" }}
          {{ with .Resources.GetMatch $img }}
            {{$imgDir := .Fill "232x232 Center"}}
            <img class="flex-child" src="{{ $imgDir.RelPermalink }}" width="232" height="232" alt="Director {{ $name }}" tabindex="0">
          {{ end }}
        {{ end }}
      </div>
      <div class="name">{{ .name }}</div>
      <div class="title"> {{ .title }}</div>
      <div class="bio" tabindex="-1">{{ .blurb }}</div>
      <div class="morelink-parent">
        <button class="btn btn-custom btn-bio" tabindex="0" aria-label="Read bio">MORE INFO</button>
      </div>
    </div>
    {{ end }}
  {{ end }}
</div>

<div class="modal fade" id="peopleBioModal" tabindex="-1" role="dialog" aria-labelledby="modalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalLongTitle">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

{{ end }}
